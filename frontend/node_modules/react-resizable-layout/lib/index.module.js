import{useRef as n,useState as e,useMemo as t,useCallback as i}from"react";function r(){return r=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},r.apply(this,arguments)}var o=["ArrowRight","Right"],a=["ArrowDown","Down"],c=[].concat(["ArrowLeft","Left"],o),u=[].concat(["ArrowUp","Up"],a),s=[].concat(o,a),d=function(o){var a=o.axis,d=o.disabled,l=void 0!==d&&d,f=o.initial,v=void 0===f?0:f,p=o.min,m=void 0===p?0:p,h=o.max,g=void 0===h?Infinity:h,y=o.reverse,w=o.step,x=void 0===w?10:w,R=o.shiftStep,b=void 0===R?50:R,D=o.onResizeStart,P=o.onResizeEnd,E=o.containerRef,z=Math.min(Math.max(v,m),g),k=n(!1),L=e(!1),A=L[0],C=L[1],M=e(z),O=M[0],S=M[1],X=n(z),Y=e(z),j=Y[0],K=Y[1],B=t(function(){return{role:"separator","aria-valuenow":O,"aria-valuemin":m,"aria-valuemax":g,"aria-orientation":"x"===a?"vertical":"horizontal","aria-disabled":l}},[a,l,g,m,O]),I=i(function(n){if(k.current&&!l){n.stopPropagation(),n.preventDefault();var e=function(){if("x"===a){if(null!=E&&E.current){var e=E.current.getBoundingClientRect(),t=e.left;return y?t+e.width-n.clientX:n.clientX-t}return y?document.body.offsetWidth-n.clientX:n.clientX}if(null!=E&&E.current){var i=E.current.getBoundingClientRect(),r=i.top;return y?r+i.height-n.clientY:n.clientY-r}return y?document.body.offsetHeight-n.clientY:n.clientY}();e=Math.min(Math.max(e,m),g),S(e),X.current=e}},[a,l,g,m,y,E]),U=i(function(n){l||(n.stopPropagation(),k.current=!1,C(!1),K(X.current),document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",U),P&&P({position:X.current}))},[l,I,P]),H=i(function(n){l||(n.stopPropagation(),k.current=!0,C(!0),document.addEventListener("pointermove",I),document.addEventListener("pointerup",U),D&&D({position:X.current}))},[l,I,U,D]),W=i(function(n){if(!l){if("Enter"===n.key)return S(v),void(X.current=v);if(("x"!==a||c.includes(n.key))&&("y"!==a||u.includes(n.key))){D&&D({position:X.current});var e=n.shiftKey?b:x,t=y?-1:1,i=s.includes(n.key)?t:-1*t,r=O+e*i;r<m?(S(m),X.current=m):r>g?(S(g),X.current=g):(S(r),X.current=r),P&&P({position:X.current})}}},[l,a,D,b,x,y,O,m,g,P,v]),q=i(function(){l||(S(v),X.current=v)},[l,v]);return{position:O,endPosition:j,isDragging:A,separatorProps:r({},B,{onPointerDown:H,onKeyDown:W,onDoubleClick:q}),setPosition:S,splitterProps:r({},B,{onPointerDown:H,onKeyDown:W,onDoubleClick:q})}},l=function(n){var e=n.disabled,t=n.initial,i=n.min,r=n.max;return(0,n.children)(d({axis:n.axis,disabled:void 0!==e&&e,initial:void 0===t?0:t,min:void 0===i?0:i,max:void 0===r?Infinity:r,reverse:n.reverse,onResizeStart:n.onResizeStart,onResizeEnd:n.onResizeEnd,containerRef:n.containerRef}))};export{l as default,d as useResizable};
